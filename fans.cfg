[heater_fan hotend_fan]
pin: PE11

[fan]
pin: PE9

[fan_generic Curtain_Fan]
pin: PE13

[output_pin Curtain_Fan_Enable]
pin: virtual_pin: curtain_fan_enable
value: 1

[controller_fan Board_Fan]
pin: PD3
fan_speed: 1.0
idle_timeout: 120
heater: heater_bed, extruder
stepper: stepper_x, stepper_y, stepper_z, stepper_z1

[gcode_macro CURTAIN_FAN_TOGGLE]
gcode:
    {% if printer.virtual_pins.pins.curtain_fan_enable.value %}
      SET_PIN PIN=Curtain_Fan_Enable VALUE=0
    {% else %}
      SET_PIN PIN=Curtain_Fan_Enable VALUE=1
    {% endif %}
